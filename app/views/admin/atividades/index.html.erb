<!-- <h1>Atividades#index</h1>
<p>Find me in app/views/atividades/index.html.erb</p> -->

<!-- source: http://hellotumo.com/2012/11/how-to-embed-specific-cells-when-embedding-a-google-spreadsheet/ -->
<!-- <iframe src="https://docs.google.com/spreadsheets/d/1j157EqP2-THgWC2Fu1qQ2cSt5_pqQixI_jXS8QLUWhM/pubhtml/sheet?headers=false&amp;gid=1290413671&amp;range=BE1:BK" width="1000" height="120"></iframe> -->

<h1 class="h1-evt">Todas as atividades</h1>
<br>

  <% @atividades.order(nome: :asc).each_with_index do |atividade, index| %>
    <div class="card">
    	<header class="card-header justify-content-center">
    		<span class="badge badge-pill badge-primary badge-qtd"><%= atividade.pessoas.count %></span>
        <a href="#" data-toggle="collapse" data-target="#collapse<%= index+1 %>" aria-expanded="true" class="text-primary alert-link mt-1">
    			<span class="title"><%= atividade.nome %></span><i class="icon-action fa fa-chevron-down float-right mt-1"></i>
    		</a> - Professor(a)/Responsável:
        <% atividade.voluntarios.each do |voluntario| %>
          <% if atividade.voluntarios.count > 1 %>
            <%= voluntario.nome %><% if (voluntario != atividade.voluntarios.last )%>, <% end %>
          <% else %>
            <%= voluntario.nome %>
          <% end %>
        <% end %>
    	</header>
    	<div class="collapse" id="collapse<%= index+1 %>" style="">
    		<article class="card-body">
          <div class="row no-gutters d-flex align-items-start">
              <div class="col-md-12 mt-2">
                <p><b>Horário:</b> <%= atividade.dias_semana %> - <%= atividade.horario %></p>
              </div>

              <div class="col d-flex mb-0 mt-0 mr-0 ml-0">
                <%= link_to 'Cadastrar pessoa', new_atividade_pessoa_path(atividade), class: 'btn btn-outline-success mr-2' %>
                <%= link_to 'Editar', edit_atividade_path(atividade),
                class: 'btn btn-outline-primary mr-2' %>
                <%= link_to 'Apagar', atividade_path(atividade), class: 'btn btn-outline-danger', method: :delete, data: { confirm: 'Tem certeza que deseja apagar a atividade selecionado?' } %>
              </div>
          </div>
          <hr>

          <% atividade.pessoas.order(nome: :asc).each do |pessoa| %>
    			<p class="mb-0 mt-0">
            <%= link_to pessoa.nome, pessoa, class: 'text-dark', title: "Ver ficha de #{pessoa.nome}" %>
            <!-- <a href='#'> Remover </a> --> 
            <%= link_to "Remover", atividade_pessoa_path(atividade, pessoa), method: :delete %>
          </p><hr>
          <% end %>
    		</article> <!-- card-body -->
    	</div> <!-- collapse -->
    </div> <!-- card --> <br>
  <% end %>
