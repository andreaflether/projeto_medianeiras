<!-- Latest compiled and minified CSS -->
<link rel="stylesheet" href="https://unpkg.com/multiple-select@1.4.3/dist/multiple-select.min.css">

<!-- Latest compiled and minified JavaScript -->
<script src="https://unpkg.com/multiple-select@1.4.3/dist/multiple-select.min.js"></script>

<div class="section evt-form">
  <%= simple_form_for @pessoa do |f| %>
  <%= f.input :nome, input_html: { class: 'form-control'}, label_html: { class: 'label label_b'}  %>
  <%= f.input :dt_nascimento, label: "Data de nascimento", input_html: { class: 'form-control ml-1 mr-1 d-flex col'},
  label_html: { class: 'label label_b col-md-12'}, wrapper_html: {class: 'form-row'}, start_year: Date.today.year - 90,
  end_year: Date.today.year %>
  <%= f.input :idade, input_html: { class: 'form-control'}, label_html: { class: 'label label_b'}  %>
  <%= f.input :endereco, label: "Endereço", input_html: { class: 'form-control'}, label_html: { class: 'label label_b'}  %>
  <%= f.input :bairro, input_html: { class: 'form-control'}, label_html: { class: 'label label_b'}  %>
  <%= f.input :telefone, input_html: { class: 'form-control'}, label_html: { class: 'label label_b'}  %>
  <%= f.input :religiao, prompt: "Escolha uma religião", label: "Religião", collection: [ "Ateu", "Católico(a)", "Evangélico(a)", "Agnóstico(a)", "Outra"],
  input_html: { class: 'form-control', id: 'religiao'}, label_html: { class: 'label label_b'}%>
  <%= content_tag :div, class: 'js-dependent-fields', data: { 'select-id': 'religiao', 'option-value': 'Outra'} do %>
    <%= f.input :religiao, label: "Informe a religião", input_html: { class: 'form-control hidden-fields'}, label_html: { class: 'label label_b hidden-fields'}  %>
  <% end %>
  <%= f.input :responsavel, label: "Responsável", input_html: { class: 'form-control'}, label_html: { class: 'label label_b'}  %>
  <%= f.input :dt_entrada, label: "Data de entrada no projeto", input_html: { class: 'form-control ml-1 mr-1 d-flex col'},
  label_html: { class: 'label label_b col-md-12'}, wrapper_html: {class: 'form-row'}  %>
  <%= f.input :estuda, collection: [['true', 'Sim'], ['false', 'Não']], prompt: "Selecione uma opção", label_method: :second,
  value_method: :first, label: "Estuda?", input_html: { class: 'form-control', id: 'estudo'}, label_html: { class: 'select label_b'} %>

  <%= content_tag :div, class: 'js-dependent-fields', data: { 'select-id': 'estudo', 'option-value': 'true'} do %>
    <%= f.input :escola, input_html: { class: 'form-control hidden-fields'}, label_html: { class: 'label label_b hidden-fields'}  %>
    <%= f.input :serie, prompt: "Escolha uma série", label: "Série", collection: [ "Alfabetização", "2ª série", "3ª série", "4ª série", "5ª série", "6ª série",
    "7ª série", "8ª série", "9ª série", "1º ano", "2º ano", "3º ano"], input_html: { class: 'form-control hidden-fields'}, label_html: { class: 'label label_b hidden-fields'} %>
  <% end %>

  <%= f.association :atividades, :collection => @atividades.order('nome ASC'), :label_method => :nome,
  :value_method => :id, input_html: {class:'select2', style: 'width: 100%; '}, label_html: { class: 'label label_b'} %><br>
  <%= f.button :submit, 'Criar cadastro de pessoa', class: "btn btn-primary btn-criar"%>
  <%= link_to 'Voltar', :back, class: "btn btn-outline-secondary" %>

  <!-- Script para habilitar o select2 no campo "Atividades" -->
  <script>
    $(document).ready(function() {
      $('.select2').select2({
        theme: 'bootstrap',
        placeholder: 'Selecionar atividade...',
        language: 'pt-BR'
      });
  });
  </script>

  <% end %>
</div>
<br>

<!-- Script para habilitar campos "Escola" e "Série" apenas se o usuário selecionar a opção "Sim" em Estuda? -->
<script>
  $(function() {
    $('#boolean').change(function(){
        if ($(this).val () == 'true') {
            $('.hidden-fields').show();
        } else {
            $('.hidden-fields').hide();
        }
    });
})
</script>
